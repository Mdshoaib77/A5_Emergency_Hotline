<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Emergency Service Directory</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
  <meta name="description" content="Government Emergency Services at your fingertip" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%2322c55e'/%3E%3Ctext x='50' y='58' text-anchor='middle' font-size='50' fill='white'%3E%E2%9A%A1%3C/text%3E%3C/svg%3E" />
  <style>
    .glass { backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); }
    .whitespace-nowrap { white-space: normal !important; }
  </style>
</head>
<body class="bg-base-200 min-h-screen">

<!-- Navbar -->
<nav class="navbar bg-base-100 shadow-sm sticky top-0 z-50">
  <div class="container mx-auto px-3 flex flex-wrap justify-between items-center gap-3">
    <div class="flex items-center gap-3 flex-shrink-0">
      <div class="avatar">
        <div class="w-9 sm:w-10 md:w-12 rounded-full">
          <img src="assets/logo.png" alt="Logo" />
        </div>
      </div>
      <a class="text-sm sm:text-base md:text-lg lg:text-xl font-semibold text-[#006747] leading-tight">
        Emergency<br class="hidden sm:block" />Service
      </a>
    </div>

    <div class="flex items-center gap-2 sm:gap-3 flex-wrap justify-end w-full sm:w-auto mt-2 sm:mt-0">
      <div class="flex items-center gap-1 bg-white rounded-full px-2 sm:px-3 py-1 shadow text-xs sm:text-sm">
        <span id="heartCount" class="font-medium text-gray-700">0</span>
        <img src="assets/heart.png" alt="Heart" class="w-4 h-4" />
      </div>


      <div class="flex items-center gap-1 bg-white rounded-full px-2 sm:px-3 py-1 shadow text-xs sm:text-sm">
        <span id="coinCount" class="font-medium text-gray-700">100</span>
        <img src="assets/coin.png" alt="Coin" class="w-4 h-4" />
      </div>

      <button id="copyPill" class="flex items-center gap-1 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-full px-3 sm:px-4 py-1 shadow text-xs sm:text-sm" type="button">
        Copy
      </button>
    </div>
  </div>
</nav>

<!-- Header -->
<header class="relative">
  <div class="bg-gradient-to-br from-[#013223] via-[#006747] to-[#013223] text-base-100">
    <div class="container mx-auto px-3 py-6 sm:py-8 md:py-10 text-center">
      <div class="mx-auto mb-4 flex items-center justify-center">
        <div class="w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 flex items-center justify-center">
          <img src="assets/logo-dark.png" alt="Logo" class="w-full h-full object-contain" />
        </div>
      </div>
      <h1 class="text-lg sm:text-xl md:text-3xl lg:text-4xl font-bold">Emergency Service Directory</h1>
      <p class="mt-2 opacity-90 mx-auto text-sm sm:text-base whitespace-nowrap overflow-x-auto">
  Government Emergency Services at Your Fingertips — A project by Government of the People’s Republic of Bangladesh
</p>

    </div>
  </div>
</header>


<!-- Main -->
<main class="container mx-auto px-3 py-4 sm:py-6 md:py-8">
  <div class="grid lg:grid-cols-3 gap-4">
    <section class="lg:col-span-2">
      <div id="cardGrid" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4"></div>
    </section>

    <aside class="bg-white rounded-xl shadow p-3 sm:p-4 h-fit">
      <div class="flex items-center justify-between mb-2 sm:mb-3">
        <div class="flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 fill-emerald-600" viewBox="0 0 24 24">
            <path d="M12 8a1 1 0 0 1 1 1v3.59l2.3 2.3a1 1 0 1 1-1.4 1.42l-2.59-2.6A1 1 0 0 1 11 13V9a1 1 0 0 1 1-1zm0-6C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"/>
          </svg>
          <h2 class="text-base sm:text-lg font-semibold">Call History</h2>
        </div>
        <button id="clearHistory" class="btn btn-xs sm:btn-sm bg-green-500 hover:bg-green-600 text-white rounded-full px-3 sm:px-4">
          Clear
        </button>
      </div>
      <ul id="historyList" class="space-y-2 max-h-[300px] sm:max-h-[400px] md:max-h-[520px] overflow-y-auto"></ul>
    </aside>
  </div>
</main>

<!-- Template Section-->
<template id="cardTemplate">
  <div class="card bg-base-100 shadow-sm border border-base-200">
    <div class="card-body p-4">
      <div class="flex items-start justify-between gap-3">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-xl bg-base-200 grid place-items-center text-xl icon-box"></div>
          <div>
            <h3 class="font-semibold leading-tight name-bn text-sm sm:text-base">Service Name</h3>
            <p class="text-xs opacity-70 name-en">English name</p>
          </div>
        </div>
        <button class="btn btn-circle btn-ghost btn-xs like-btn" aria-label="Like">
          <svg xmlns="http://www.w3.org/2000/svg" class="size-4" fill="currentColor" viewBox="0 0 24 24">
            <path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 22l7.8-8.6 1-1a5.5 5.5 0 0 0 0-7.8Z"/>
          </svg>
        </button>
      </div>
      <div class="mt-3">
        <div class="text-xl sm:text-2xl font-bold number">000</div>
        <div class="mt-1">
          <div class="badge badge-outline rounded-full category text-gray-600 bg-gray-50">Category</div>
        </div>
      </div>
      <div class="mt-4 grid grid-cols-2 gap-3">
        <button class="btn btn-xs sm:btn-sm bg-white border border-base-300 text-gray-700 hover:bg-base-100 copy-btn">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
            <path d="M16 1H4c-1.1 0-2 .9-2 2v12h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
          </svg>
          <span>Copy</span>
        </button>
        <button class="btn btn-xs sm:btn-sm bg-green-600 hover:bg-green-700 text-white call-btn">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
            <path d="M6.62 10.79a15.053 15.053 0 0 0 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1C10.29 21 3 13.71 3 4c0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.24.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
          </svg>
          <span>Call</span>
        </button>
      </div>
    </div>
  </div>
</template>


<!-- Script -->
<script>
  const services = [
    { icon:"assets/emergency.png", nameBn:"National Emergency Number", nameEn:"National Emergency", number:"999", category:"All" },
    { icon:"assets/police.png", nameBn:"Police Helpline Number", nameEn:"Police", number:"999", category:"Police" },
    { icon:"assets/fire-service.png", nameBn:"Fire Service Number", nameEn:"Fire Service", number:"999", category:"Fire" },
    { icon:"assets/ambulance.png", nameBn:"Ambulance Service Number", nameEn:"Ambulance", number:"1994-999999", category:"Health" },
    { icon:"assets/emergency.png", nameBn:"Women & Child Helpline", nameEn:"Women & Child", number:"109", category:"Help" },
    { icon:"assets/emergency.png", nameBn:"Anti-Corruption Helpline", nameEn:"Anti-Corruption", number:"106", category:"Govt." },
    { icon:"assets/emergency.png", nameBn:"Electricity Helpline", nameEn:"Electricity Outage", number:"16216", category:"Electricity" },
    { icon:"assets/brac.png", nameBn:"Brac Helpline", nameEn:"BRAC", number:"16445", category:"NGO" },
    { icon:"assets/Bangladesh-Railway.png", nameBn:"Railway Helpline", nameEn:"Bangladesh Railway", number:"163", category:"Travel" }
  ];

  let coins = 100, heartCount = 0, copyCount = 0;
  const coinEl = document.getElementById("coinCount"), heartEl = document.getElementById("heartCount"), copyPill = document.getElementById("copyPill"), grid = document.getElementById("cardGrid"), historyList = document.getElementById("historyList"), clearHistoryBtn = document.getElementById("clearHistory");

  function nowTime() { const d = new Date(); return d.toLocaleTimeString([], { hour:"2-digit", minute:"2-digit", second:"2-digit" }); }

  function renderCard(service){
    const tpl = document.getElementById("cardTemplate"), node = tpl.content.cloneNode(true);
    const iconBox = node.querySelector(".icon-box");
    iconBox.innerHTML = `<img src="${service.icon}" alt="${service.nameEn}" class="w-6 h-6" />`;
    node.querySelector(".name-bn").textContent = service.nameBn;
    node.querySelector(".name-en").textContent = service.nameEn;
    node.querySelector(".number").textContent = service.number;
    node.querySelector(".category").textContent = service.category;

    const likeBtn = node.querySelector(".like-btn"), copyBtn = node.querySelector(".copy-btn"), callBtn = node.querySelector(".call-btn");

    likeBtn.addEventListener("click", () => { heartCount++; heartEl.textContent = heartCount; });

    copyBtn.addEventListener("click", async () => {
      try { await navigator.clipboard.writeText(service.number); alert(`Copied: ${service.number}`); } 
      catch { const ta = document.createElement("textarea"); ta.value = service.number; document.body.appendChild(ta); ta.select(); document.execCommand("copy"); ta.remove(); alert(`Copied: ${service.number}`); }
      copyCount++; copyPill.textContent = `${copyCount} Copy`;
    });

    callBtn.addEventListener("click", () => {
      if(coins<20){ alert("Not enough coins to make a call. You need 20 coins."); return; }
      alert(`Calling ${service.nameBn} (${service.number})...`); coins -=20; coinEl.textContent = coins;
      addToHistory(service.nameBn, service.number, nowTime());
    });

    grid.appendChild(node);
  }

  function addToHistory(name, number, timeStr){
    const li = document.createElement("li");
    li.className = "flex items-start justify-between gap-2 border rounded-lg px-3 py-2";
    li.innerHTML = `<div><div class="font-medium leading-tight">${name}</div><div class="text-xs opacity-70">${number}</div></div><div class="text-xs opacity-70 mt-0.5">${timeStr}</div>`;
    historyList.prepend(li);
  }

  clearHistoryBtn.addEventListener("click", ()=> historyList.innerHTML="");
  services.forEach(renderCard);
</script>
</body>
</html>
